<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>View Pubs</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
        
    </head>
    <body>
        <div class="container d-flex align-self-center justify-content-center mt-5">
            <div class="card" style="width: 100%;">
                <div class="card-header"><h1>View all pubs</h1></div>
                <div class="card-body">
                    <div id="map" style="width: 100%; height: 400px;"></div>
                </div>
                <div class="card-footer">
                    <p><small>Designed by Kieran Roper</small></p>
                </div>
            </div>
        </div>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        
        <script>
            function csvJSON(csv){
                var lines=csv.split("\n");

                var result = [];

                // NOTE: If your columns contain commas in their values, you'll need
                // to deal with those before doing the next step 
                // (you might convert them to &&& or something, then covert them back later)
                // jsfiddle showing the issue https://jsfiddle.net/
                var headers=lines[0].split(",");

                for(var i=1;i<lines.length;i++){

                    var obj = {};
                    var currentline=lines[i].split(",");

                    for(var j=0;j<headers.length;j++){
                        obj[headers[j]] = currentline[j];
                    }

                    result.push(obj);

                }

                //return result; //JavaScript object
                return JSON.stringify(result); //JSON
            }

            console.log(csvJSON("../spoons_list_20230414.csv"));
            console.log("test");
        </script>
    </body>
</html>