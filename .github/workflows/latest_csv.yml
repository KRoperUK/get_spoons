name: Update latest_list
on:
  workflow_run:
      workflows: ["Update CSV"]
      types:
        - completed
  workflow_dispatch:
jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ”” Checkout
        uses: actions/checkout@v2
      - name: âš™ï¸ Git Config
        run: |
            git config user.email "<>"
            git config user.name "ğŸ¤– Github Actions - Update latest_list"
      - name: â° Update latest
        run: rm -f latest_list.csv; find spoons* | sort -r | head -n 1 | xargs -I {} ln -s {} latest_list.csv
      - name: ğŸ Check for changes
        run: git status
      - name: ğŸ­ Stage changed files
        run: git add .
      - name: ğŸ¨ Commit changed files
        run: git commit -m "Updated latest csv."
      - name: ğŸ¤Ÿ Fetch from master
        run: git fetch origin master
      - name: ğŸ˜– Push code to master
        run: git push origin HEAD:master
